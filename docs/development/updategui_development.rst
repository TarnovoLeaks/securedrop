Development of SecureDropUpdater in the journalist_gui directory
=================================================================

The `SecureDropUpdater` is a tool used by the journalists and admins, this tool helps them to update their SecureDrop git repository to the latest released tag.
It is a GUI tool and it is written using PyQt5 bindings of the`Qt framework <https://doc.qt.io/>`_. This tool is written
using Python3.

Installing the dependencies in a virtual environment
-----------------------------------------------------

You can use `pipenv tool <https://docs.pipenv.org>`_ to create a virtualenv and install the dependencies.

::

    $ pip3 install pipenv --user
    $ pipenv install
    $ pipenv shell


The first command will create the virtualenv and install the dependencies. The second command is used to
enable the Pipenv shell.


To update the UI design
-----------------------

The design of the GUI is saved in the *journalist_gui/mainwindow.ui* file. To update the UI, one has to first install
`qt-creator` tool in the system. We are currently using *5.10.1* version of Qt for this project.

::

    $ sudo apt install qt-creator python3-pyqt5



If we make any changes to the UI, we  will have to use *pyuic5* command to update the corresponding Python code.

::

    $ pyuic5 journalist_gui/mainwindow.ui -o journalist_gui/updaterUI.py


Using resources in the UI
--------------------------

All icons and images for the UI is stored in the `journalist_gui/static` directory. These are known as resources for the
project. The *journalist_gui/resources.qrc* file contains the list of current resources for the project. Each resource needs
to be defined inside of a *<file></file>*.

Exaxmple qrc file

.. code-block:: xml

    <RCC>
        <qresource prefix="/images">
            <file>static/securedrop.png</file>
            <file>static/securedrop_icon.png</file>
        </qresource>
    </RCC>

We will have to update the corresponding Python file for any change in this resource file. We can do that by the following
command.


::

    $ pyrcc5 journalist_gui/resources.qrc -o journalist_gui/resources_rc.py



.. note:: The *updaterUI.py* and *resources_rc.py* files are generated by the tools. So, do not make any changes to these
          files. Any changes made to these files will be overridden.